<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Ethereum Token Tracer</title>
    <!-- 

Letter Template 

https://templatemo.com/tm-510-letter



Template Re-distribution is NOT allowed.

-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet"><!-- Google web font "Open Sans" -->
    <link href="stylesheets/registe/css/font-awesome.min.css" rel="stylesheet">
    <link href="stylesheets/registe/css/bootstrap.min.css" rel="stylesheet">
    <link href="stylesheets/registe/css/demo.css" rel="stylesheet">
    <link href="stylesheets/registe/css/templatemo-style.css" rel="stylesheet">
    <script src="stylesheets/registe/js/modernizr.custom.86080.js" type="text/javascript">
    </script>
</head>

<body>
    <div id="particles-js"></div>
    <ul class="cb-slideshow">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <div class="container-fluid">
        <div class="row cb-slideshow-text-container">
            <div class="tm-content col-xl-6 col-sm-8 col-xs-8 ml-auto section">
                <header class="mb-5">
                    <h1>Registe !</h1>
                </header>
                <p class="mb-5">Enter the TOKEN ADDRESS you want to trace.</p>
                <div class="row form-section">
                    <div class="col-md-7 col-sm-7 col-xs-7">
                        <input class="form-control" id="tokenAddress" placeholder="Token Address..." type="text">
                    </div>
                    <div class="col-md-5 col-sm-5 col-xs-5">
                        <button class="tm-btn-subscribe" id="regButton">Let's TRACE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'>
    </script>
    <script src="javascripts/index.js">
    </script>
    <script src="stylesheets/registe/js/particles.js" type="text/javascript">
    </script>
    <script src="stylesheets/registe/js/app.js" type="text/javascript">
    </script>
    <script>
    /* DOM is ready
           ------------------------------------------------*/
    $(function() {

        $('#regButton').click(function() {
        	if ($('#tokenAddress').val()) {
                $('#regButton').attr('disabled', 'disabled');
                $('#regButton').text('Waiting ...');

        		$.post('/regTracer', {
        			tokenAddress: $('#tokenAddress').val()
        		}, function(result) {
        			if (result.receipt) {
        				alert('開始同步交易紀錄！ Token Tracer位址: ' + result.tracer);
        				window.location.href = 'query.html';
        			} else {
        				alert('作業失敗！');
        			}
        		})
        	} else {
        		alert('Token Address 不得為空');
        	}
        });

    });
    </script>
</body>

</html>